---
description: コードレビューと修正を行う
---

以下の手順でコードレビューと修正を行ってください：

## 1. レビュー対象の確認
- 直近の変更ファイルを確認（git diff または指定されたファイル）
- 変更内容の概要を把握

## 2. 以下の観点でレビュー

### セキュリティ
- [ ] XSS（ユーザー入力のエスケープ）
- [ ] インジェクション（SQL, コマンド）
- [ ] 認証・認可の実装漏れ
- [ ] 機密情報のハードコード
- [ ] CSRF対策

### React / Next.js
- [ ] 不要な再レンダリング（useMemo, useCallback の検討）
- [ ] useEffect の依存配列の正確性
- [ ] Server Component / Client Component の適切な使い分け
- [ ] key プロパティの適切な設定
- [ ] 状態管理の適切性

### API設計
- [ ] RESTful 原則に従っているか
- [ ] エラーハンドリングの網羅性
- [ ] 入力バリデーション
- [ ] レスポンス形式の一貫性

### DB設計（該当する場合）
- [ ] N+1 問題
- [ ] 適切なインデックス
- [ ] トランザクションの考慮

### コード品質
- [ ] 命名の一貫性・明確さ
- [ ] 重複コードの有無
- [ ] エッジケースの考慮
- [ ] エラーハンドリング
- [ ] CLAUDE.md のコーディング規約に準拠

## 3. レビュー結果の報告
問題点を一覧で報告：
- 🔴 重大: 必ず修正が必要
- 🟡 警告: 修正を推奨
- 🟢 提案: あれば良い改善

## 4. 修正の実施
- 🔴 重大 → 即座に修正
- 🟡 警告 → ユーザーに確認後、修正
- 🟢 提案 → ユーザーの判断に委ねる

## 5. 修正後の確認
- lint / format 実行
- テスト実行
- 修正内容のサマリーを報告
